<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>ðŸ–©Calculator</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div class="container">
      <div class="upperpart">
        <div id="upper" style="color: white"></div>
        <div id="middle"></div>
        <div id="lower">
          <div class="history click">&#x21A9;</div>
          <div onclick="handleCutButton()" class="backspace click">&#x232B;</div>
        </div>
      </div>
      <hr />
      <div class="lowerpart">
        <div
          onclick="handleTheClearKey(this)"
          class="item click operators clear"
          id="clear"
          value="C"
        >
          C
        </div>
        <div
          onclick="handleParenthesis(this)"
          class="item click operators"
          value="()"
        >
          ()
        </div>
        <div
          onclick="handlePercentageOperator(this)"
          class="item click operators"
          value="%"
        >
          %
        </div>
        <div
          onclick="handleKeyInput(this)"
          class="item click operators"
          value="/"
        >
          /
        </div>
        <!-- Ã· -->

        <div onclick="handleKeyInput(this)" class="item click" value="7">7</div>
        <div onclick="handleKeyInput(this)" class="item click" value="8">8</div>
        <div onclick="handleKeyInput(this)" class="item click" value="9">9</div>
        <div
          onclick="handleKeyInput(this)"
          class="item click operators"
          value="x"
        >
          *
        </div>

        <div onclick="handleKeyInput(this)" class="item click" value="4">4</div>
        <div onclick="handleKeyInput(this)" class="item click" value="5">5</div>
        <div onclick="handleKeyInput(this)" class="item click" value="6">6</div>
        <div
          onclick="handleKeyInput(this)"
          class="item click operators"
          value=""
        >
          -
        </div>

        <div onclick="handleKeyInput(this)" class="item click" value="1">1</div>
        <div onclick="handleKeyInput(this)" class="item click" value="2">2</div>
        <div onclick="handleKeyInput(this)" class="item click" value="3">3</div>
        <div
          onclick="handleKeyInput(this)"
          class="item click operators"
          value="+"
        >
          +
        </div>

        <div onclick="handleMakeNegative(this)" class="item click" value="+/-">
          +/-
        </div>
        <div onclick="handleKeyInput(this)" class="item click" value="0">0</div>
        <div onclick="handleKeyInput(this)" class="item click" value=".">.</div>
        <div onclick="handleOutput(this)" class="item click equals" value="=">
          =
        </div>
      </div>
    </div>
    <script>
      let keyInputString = ''
      let parenthesis = 0
      
      // Part to show the input and output on the screen
      
       function handleShowInputInUpperPart(input) {
        const inputshowbox = document.getElementById('upper')
        inputshowbox.innerText = input
      }
      function handleShowInputLowerPart(result){
        const resultBox = document.getElementById('middle')
        resultBox.innerText = result

      }

      // handle the key input
      function handleKeyInput(key) {
        keyInputString += key.innerText
        console.log(keyInputString)
        handleShowInputInUpperPart(keyInputString)
      }

      // handle the clear key
      function handleTheClearKey(){
        keyInputString = ""
        handleShowInputInUpperPart("");
        handleShowInputLowerPart("")
      }

      // handle Parenthesis
      function handleParenthesis(parenthesisTurn){
          if(parenthesis == 0){
            keyInputString += '('
            parenthesis = 1
            handleShowInputInUpperPart(keyInputString);
          }else{
            keyInputString += ')'
            parenthesis = 0
            handleShowInputInUpperPart();
          }
          
      }

      // handle cut functionality
      function handleCutButton(){
        keyInputString = keyInputString.slice(0,-1)
        handleShowInputInUpperPart(keyInputString);
      }

      // handleOutput app
      function handleOutput(output) {
        try {
          const result = eval(keyInputString)
          handleShowInputLowerPart(result)
          return
        } catch (error) {
          handleShowInputLowerPart("Invalid input");
          return 'Error'
        }
      }
      
    </script>
  </body>
</html>
